source: Red Hat
models:
- name: prometheus-8x7b-v2-0
  provider: Red Hat
  description: Judge model for multi-phase training and evaluation
  readme: |-
    ## Links for Reference
    - **Homepage: In Progress**
    - **Repository:https://github.com/prometheus-eval/prometheus-eval**
    - **Paper:https://arxiv.org/abs/2405.01535**
    - **Point of Contact:seungone@cmu.edu**
    # TL;DR
    Prometheus 2 is an alternative of GPT-4 evaluation when doing fine-grained evaluation of an underlying LLM & a Reward model for Reinforcement Learning from Human Feedback (RLHF).
    ![plot](./finegrained_eval.JPG)
    Prometheus 2 is a language model using [Mistral-Instruct](https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.2) as a base model.
    It is fine-tuned on 100K feedback within the [Feedback Collection](https://huggingface.co/datasets/prometheus-eval/Feedback-Collection) and 200K feedback within the [Preference Collection](https://huggingface.co/datasets/prometheus-eval/Preference-Collection).
    It is also made by weight merging to support both absolute grading (direct assessment) and relative grading (pairwise ranking).
    The surprising thing is that we find weight merging also improves performance on each format.
    # Model Details
    ## Model Description
    - **Model type:** Language model
    - **Language(s) (NLP):** English
    - **License:** Apache 2.0
    - **Related Models:** [All Prometheus Checkpoints](https://huggingface.co/models?search=prometheus-eval/Prometheus)
    - **Resources for more information:**
      - [Research paper](https://arxiv.org/abs/2405.01535)
      - [GitHub Repo](https://github.com/prometheus-eval/prometheus-eval)
    Prometheus is trained with two different sizes (7B and 8x7B).
    You could check the 7B sized LM on [this page](https://huggingface.co/prometheus-eval/prometheus-2-7b-v2.0).
    Also, check out our dataset as well on [this page](https://huggingface.co/datasets/prometheus-eval/Feedback-Collection) and [this page](https://huggingface.co/datasets/prometheus-eval/Preference-Collection).
    ## Prompt Format
    We have made wrapper functions and classes to conveniently use Prometheus 2 at [our github repository](https://github.com/prometheus-eval/prometheus-eval).
    We highly recommend you use it!
    However, if you just want to use the model for your use case, please refer to the prompt format below.
    Note that absolute grading and relative grading requires different prompt templates and system prompts.
    ### Absolute Grading (Direct Assessment)
    Prometheus requires 4 components in the input: An instruction, a response to evaluate, a score rubric, and a reference answer. You could refer to the prompt format below.
    You should fill in the instruction, response, reference answer, criteria description, and score description for score in range of 1 to 5.
    Fix the components with \{text\} inside.
    ```
    ###Task Description:
    An instruction (might include an Input inside it), a response to evaluate, a reference answer that gets a score of 5, and a score rubric representing a evaluation criteria are given.
    1. Write a detailed feedback that assess the quality of the response strictly based on the given score rubric, not evaluating in general.
    2. After writing a feedback, write a score that is an integer between 1 and 5. You should refer to the score rubric.
    3. The output format should look as follows: \"Feedback: (write a feedback for criteria) [RESULT] (an integer number between 1 and 5)\"
    4. Please do not generate any other opening, closing, and explanations.
    ###The instruction to evaluate:
    {orig_instruction}
    ###Response to evaluate:
    {orig_response}
    ###Reference Answer (Score 5):
    {orig_reference_answer}
    ###Score Rubrics:
    [{orig_criteria}]
    Score 1: {orig_score1_description}
    Score 2: {orig_score2_description}
    Score 3: {orig_score3_description}
    Score 4: {orig_score4_description}
    Score 5: {orig_score5_description}
    ###Feedback:
    ```
    After this, you should apply the conversation template of Mistral (not applying it might lead to unexpected behaviors).
    You can find the conversation class at this [link](https://github.com/lm-sys/FastChat/blob/main/fastchat/conversation.py).
    ```
    conv = get_conv_template("mistral")
    conv.set_system_message("You are a fair judge assistant tasked with providing clear, objective feedback based on specific criteria, ensuring each assessment reflects the absolute standards set for performance.")
    conv.append_message(conv.roles[0], dialogs['instruction'])
    conv.append_message(conv.roles[1], None)
    prompt = conv.get_prompt()
    x = tokenizer(prompt,truncation=False)
    ```
    As a result, a feedback and score decision will be generated, divided by a separating phrase ```[RESULT]```
    ### Relative Grading (Pairwise Ranking)
    Prometheus requires 4 components in the input: An instruction, 2 responses to evaluate, a score rubric, and a reference answer. You could refer to the prompt format below.
    You should fill in the instruction, 2 responses, reference answer, and criteria description.
    Fix the components with \{text\} inside.
    ```
    ###Task Description:
    An instruction (might include an Input inside it), two responses to evaluate (denoted as Response A and Response B), a reference answer, and an evaluation criteria are given.
    1. Write a detailed feedback that assess the quality of the two responses strictly based on the given evaluation criteria, not evaluating in general.
    2. Make comparisons between Response A, Response B, and the Reference Answer. Instead of examining Response A and Response B separately, go straight to the point and mention about the commonalities and differences between them.
    3. After writing the feedback, indicate the better response, either "A" or "B".
    4. The output format should look as follows: "Feedback: (write a feedback for criteria) [RESULT] (Either "A" or "B")"
    5. Please do not generate any other opening, closing, and explanations.
    ###Instruction:
    {orig_instruction}
    ###Response A:
    {orig_response_A}
    ###Response B:
    {orig_response_B}
    ###Reference Answer:
    {orig_reference_answer}
    ###Score Rubric:
    {orig_criteria}
    ###Feedback:
    ```
    After this, you should apply the conversation template of Mistral (not applying it might lead to unexpected behaviors).
    You can find the conversation class at this [link](https://github.com/lm-sys/FastChat/blob/main/fastchat/conversation.py).
    ```
    conv = get_conv_template("mistral")
    conv.set_system_message("You are a fair judge assistant assigned to deliver insightful feedback that compares individual performances, highlighting how each stands relative to others within the same cohort.")
    conv.append_message(conv.roles[0], dialogs['instruction'])
    conv.append_message(conv.roles[1], None)
    prompt = conv.get_prompt()
    x = tokenizer(prompt,truncation=False)
    ```
    As a result, a feedback and score decision will be generated, divided by a separating phrase ```[RESULT]```
    ## License
    Feedback Collection, Preference Collection, and Prometheus 2 are subject to OpenAI's Terms of Use for the generated data. If you suspect any violations, please reach out to us.
    # Citation
    If you find the following model helpful, please consider citing our paper!
    **BibTeX:**
    ```bibtex
    @misc{kim2023prometheus,
        title={Prometheus: Inducing Fine-grained Evaluation Capability in Language Models},
        author={Seungone Kim and Jamin Shin and Yejin Cho and Joel Jang and Shayne Longpre and Hwaran Lee and Sangdoo Yun and Seongjin Shin and Sungdong Kim and James Thorne and Minjoon Seo},
        year={2023},
        eprint={2310.08491},
        archivePrefix={arXiv},
        primaryClass={cs.CL}
    }
    ```
    ```bibtex
    @misc{kim2024prometheus,
        title={Prometheus 2: An Open Source Language Model Specialized in Evaluating Other Language Models},
        author={Seungone Kim and Juyoung Suk and Shayne Longpre and Bill Yuchen Lin and Jamin Shin and Sean Welleck and Graham Neubig and Moontae Lee and Kyungjae Lee and Minjoon Seo},
        year={2024},
        eprint={2405.01535},
        archivePrefix={arXiv},
        primaryClass={cs.CL}
    }
    ```
  language:
  - en
  license: apache-2.0
  licenseLink: https://www.apache.org/licenses/LICENSE-2.0.txt
  tasks:
  - text-generation
  createTimeSinceEpoch: "1743078706000"
  lastUpdateTimeSinceEpoch: "1743078706000"
  logo: data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJ1dWlkLWE2ODNjMGQyLWViOTAtNGI0Yi1hOWE0LTVlMzI2NWYwNzVjNSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTc1IiBoZWlnaHQ9IjE3NSIgdmlld0JveD0iMCAwIDE3NSAxNzUiPjxkZWZzPjxzdHlsZT4udXVpZC00MmIxYTFkMi05NWQ4LTQ3OTgtYmY5ZS04YTc1NzAyOGM0NWJ7ZmlsbDpub25lO30udXVpZC01MjRiZWEwYi1mMTg2LTQ1ZjAtOWQ4Ny01ZTBhNjlkZjZhYTN7ZmlsbDojZTBlMGUwO30udXVpZC02Mzc3YmY0MS04OTU5LTQyN2ItYWFlZC0xOWRjMDlmNzM1MGV7ZmlsbDojZmZmO30udXVpZC0xNTQyMDVmNy02YzY5LTQyODYtYjllZC1hZDcwMjI0YzdiODR7ZmlsbDojZTAwO308L3N0eWxlPjwvZGVmcz48cmVjdCBjbGFzcz0idXVpZC00MmIxYTFkMi05NWQ4LTQ3OTgtYmY5ZS04YTc1NzAyOGM0NWIiIHdpZHRoPSIxNzUiIGhlaWdodD0iMTc1Ii8+PHJlY3QgY2xhc3M9InV1aWQtNjM3N2JmNDEtODk1OS00MjdiLWFhZWQtMTlkYzA5ZjczNTBlIiB4PSIxMi41IiB5PSIxMi41IiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgcng9IjM3LjUiIHJ5PSIzNy41Ii8+PHBhdGggY2xhc3M9InV1aWQtNTI0YmVhMGItZjE4Ni00NWYwLTlkODctNWUwYTY5ZGY2YWEzIiBkPSJNMTI1LDE3LjcwODMzYzE3LjgwNTY3LDAsMzIuMjkxNjcsMTQuNDg2LDMyLjI5MTY3LDMyLjI5MTY3djc1YzAsMTcuODA1NjYtMTQuNDg1OTksMzIuMjkxNjctMzIuMjkxNjcsMzIuMjkxNjdINTBjLTE3LjgwNTY3LDAtMzIuMjkxNjctMTQuNDg2LTMyLjI5MTY3LTMyLjI5MTY3VjUwYzAtMTcuODA1NjcsMTQuNDg1OTktMzIuMjkxNjcsMzIuMjkxNjctMzIuMjkxNjdoNzVNMTI1LDEyLjVINTBjLTIwLjcxMDY3LDAtMzcuNSwxNi43ODkzMy0zNy41LDM3LjV2NzVjMCwyMC43MTA2NywxNi43ODkzMywzNy41LDM3LjUsMzcuNWg3NWMyMC43MTA2NiwwLDM3LjUtMTYuNzg5MzMsMzcuNS0zNy41VjUwYzAtMjAuNzEwNjctMTYuNzg5MzQtMzcuNS0zNy41LTM3LjVoMFoiLz48cGF0aCBjbGFzcz0idXVpZC0xNTQyMDVmNy02YzY5LTQyODYtYjllZC1hZDcwMjI0YzdiODQiIGQ9Ik0xMTYuNjY2NjIsMTE5LjI3MDgzaC01OC4zMzMzM2MtMS4wNTM4NywwLTIuMDAxOTUtLjYzNDc3LTIuNDA2ODItMS42MDcyNi0uNDAyODMtLjk3MjQ5LS4xNzkwNC0yLjA5MzUxLjU2NTU5LTIuODM4MTNsMjcuMzI1NDQtMjcuMzI1NDQtMjcuMzI1NDQtMjcuMzI1NDRjLS43NDQ2My0uNzQ0NjMtLjk2ODQyLTEuODY1NjQtLjU2NTU5LTIuODM4MTMuNDA0ODctLjk3MjQ5LDEuMzUyOTUtMS42MDcyNiwyLjQwNjgyLTEuNjA3MjZoNTguMzMzMzNjMS4wNTM4NywwLDIuMDAxOTUuNjM0NzcsMi40MDY4MiwxLjYwNzI2LjQwMjgzLjk3MjQ5LjE3OTA0LDIuMDkzNTEtLjU2NTU5LDIuODM4MTNsLTI3LjMyNTQ0LDI3LjMyNTQ0LDI3LjMyNTQ0LDI3LjMyNTQ0Yy43NDQ2My43NDQ2My45Njg0MiwxLjg2NTY0LjU2NTU5LDIuODM4MTMtLjQwNDg3Ljk3MjQ5LTEuMzUyOTUsMS42MDcyNi0yLjQwNjgyLDEuNjA3MjZaTTY0LjYxOTkxLDExNC4wNjI1aDQ1Ljc2MDA5bC0yMi44ODAwNS0yMi44ODAwNS0yMi44ODAwNSwyMi44ODAwNVpNNjQuNjE5OTEsNjAuOTM3NWwyMi44ODAwNSwyMi44ODAwNSwyMi44ODAwNS0yMi44ODAwNWgtNDUuNzYwMDlaIi8+PHBhdGggY2xhc3M9InV1aWQtMTU0MjA1ZjctNmM2OS00Mjg2LWI5ZWQtYWQ3MDIyNGM3Yjg0IiBkPSJNMTE2LjY2NjYyLDkwLjEwNDE3aC01OC4zMzMzM2MtMS40Mzg0LDAtMi42MDQxNy0xLjE2NTc3LTIuNjA0MTctMi42MDQxN3MxLjE2NTc3LTIuNjA0MTcsMi42MDQxNy0yLjYwNDE3aDU4LjMzMzMzYzEuNDM4NCwwLDIuNjA0MTcsMS4xNjU3NywyLjYwNDE3LDIuNjA0MTdzLTEuMTY1NzcsMi42MDQxNy0yLjYwNDE3LDIuNjA0MTdaIi8+PHJlY3QgY2xhc3M9InV1aWQtNjM3N2JmNDEtODk1OS00MjdiLWFhZWQtMTlkYzA5ZjczNTBlIiB4PSIxMTIuNSIgeT0iMTEyLjUiIHdpZHRoPSIxMi41IiBoZWlnaHQ9IjEyLjUiLz48cGF0aCBkPSJNMTI0Ljk5OTk1LDEyNy42MDQxN2gtMTIuNWMtMS40Mzg0LDAtMi42MDQxNy0xLjE2NTc3LTIuNjA0MTctMi42MDQxN3YtMTIuNWMwLTEuNDM4NCwxLjE2NTc3LTIuNjA0MTcsMi42MDQxNy0yLjYwNDE3aDEyLjVjMS40Mzg0LDAsMi42MDQxNywxLjE2NTc3LDIuNjA0MTcsMi42MDQxN3YxMi41YzAsMS40Mzg0LTEuMTY1NzcsMi42MDQxNy0yLjYwNDE3LDIuNjA0MTdaTTExNS4xMDQxMiwxMjIuMzk1ODNoNy4yOTE2N3YtNy4yOTE2N2gtNy4yOTE2N3Y3LjI5MTY3WiIvPjxyZWN0IGNsYXNzPSJ1dWlkLTYzNzdiZjQxLTg5NTktNDI3Yi1hYWVkLTE5ZGMwOWY3MzUwZSIgeD0iNTAiIHk9IjExMi41IiB3aWR0aD0iMTIuNSIgaGVpZ2h0PSIxMi41Ii8+PHBhdGggZD0iTTYyLjQ5OTk1LDEyNy42MDQxN2gtMTIuNWMtMS40Mzg0LDAtMi42MDQxNy0xLjE2NTc3LTIuNjA0MTctMi42MDQxN3YtMTIuNWMwLTEuNDM4NCwxLjE2NTc3LTIuNjA0MTcsMi42MDQxNy0yLjYwNDE3aDEyLjVjMS40Mzg0LDAsMi42MDQxNywxLjE2NTc3LDIuNjA0MTcsMi42MDQxN3YxMi41YzAsMS40Mzg0LTEuMTY1NzcsMi42MDQxNy0yLjYwNDE3LDIuNjA0MTdaTTUyLjYwNDEyLDEyMi4zOTU4M2g3LjI5MTY3di03LjI5MTY3aC03LjI5MTY3djcuMjkxNjdaIi8+PHJlY3QgY2xhc3M9InV1aWQtNjM3N2JmNDEtODk1OS00MjdiLWFhZWQtMTlkYzA5ZjczNTBlIiB4PSIxMTIuNSIgeT0iNTAiIHdpZHRoPSIxMi41IiBoZWlnaHQ9IjEyLjUiLz48cGF0aCBkPSJNMTI0Ljk5OTk1LDY1LjEwNDE3aC0xMi41Yy0xLjQzODQsMC0yLjYwNDE3LTEuMTY1NzctMi42MDQxNy0yLjYwNDE3di0xMi41YzAtMS40Mzg0LDEuMTY1NzctMi42MDQxNywyLjYwNDE3LTIuNjA0MTdoMTIuNWMxLjQzODQsMCwyLjYwNDE3LDEuMTY1NzcsMi42MDQxNywyLjYwNDE3djEyLjVjMCwxLjQzODQtMS4xNjU3NywyLjYwNDE3LTIuNjA0MTcsMi42MDQxN1pNMTE1LjEwNDEyLDU5Ljg5NTgzaDcuMjkxNjd2LTcuMjkxNjdoLTcuMjkxNjd2Ny4yOTE2N1oiLz48cmVjdCBjbGFzcz0idXVpZC02Mzc3YmY0MS04OTU5LTQyN2ItYWFlZC0xOWRjMDlmNzM1MGUiIHg9IjUwIiB5PSI1MCIgd2lkdGg9IjEyLjUiIGhlaWdodD0iMTIuNSIvPjxwYXRoIGQ9Ik02Mi40OTk5NSw2NS4xMDQxN2gtMTIuNWMtMS40Mzg0LDAtMi42MDQxNy0xLjE2NTc3LTIuNjA0MTctMi42MDQxN3YtMTIuNWMwLTEuNDM4NCwxLjE2NTc3LTIuNjA0MTcsMi42MDQxNy0yLjYwNDE3aDEyLjVjMS40Mzg0LDAsMi42MDQxNywxLjE2NTc3LDIuNjA0MTcsMi42MDQxN3YxMi41YzAsMS40Mzg0LTEuMTY1NzcsMi42MDQxNy0yLjYwNDE3LDIuNjA0MTdaTTUyLjYwNDEyLDU5Ljg5NTgzaDcuMjkxNjd2LTcuMjkxNjdoLTcuMjkxNjd2Ny4yOTE2N1oiLz48cmVjdCBjbGFzcz0idXVpZC02Mzc3YmY0MS04OTU5LTQyN2ItYWFlZC0xOWRjMDlmNzM1MGUiIHg9IjUwIiB5PSI4MS4yNSIgd2lkdGg9IjEyLjUiIGhlaWdodD0iMTIuNSIvPjxwYXRoIGQ9Ik02Mi40OTk5NSw5Ni4zNTQxN2gtMTIuNWMtMS40Mzg0LDAtMi42MDQxNy0xLjE2NTc3LTIuNjA0MTctMi42MDQxN3YtMTIuNWMwLTEuNDM4NCwxLjE2NTc3LTIuNjA0MTcsMi42MDQxNy0yLjYwNDE3aDEyLjVjMS40Mzg0LDAsMi42MDQxNywxLjE2NTc3LDIuNjA0MTcsMi42MDQxN3YxMi41YzAsMS40Mzg0LTEuMTY1NzcsMi42MDQxNy0yLjYwNDE3LDIuNjA0MTdaTTUyLjYwNDEyLDkxLjE0NTgzaDcuMjkxNjd2LTcuMjkxNjdoLTcuMjkxNjd2Ny4yOTE2N1oiLz48cmVjdCBjbGFzcz0idXVpZC02Mzc3YmY0MS04OTU5LTQyN2ItYWFlZC0xOWRjMDlmNzM1MGUiIHg9IjExMi41IiB5PSI4MS4yNSIgd2lkdGg9IjEyLjUiIGhlaWdodD0iMTIuNSIvPjxwYXRoIGQ9Ik0xMjQuOTk5OTUsOTYuMzU0MTdoLTEyLjVjLTEuNDM4NCwwLTIuNjA0MTctMS4xNjU3Ny0yLjYwNDE3LTIuNjA0MTd2LTEyLjVjMC0xLjQzODQsMS4xNjU3Ny0yLjYwNDE3LDIuNjA0MTctMi42MDQxN2gxMi41YzEuNDM4NCwwLDIuNjA0MTcsMS4xNjU3NywyLjYwNDE3LDIuNjA0MTd2MTIuNWMwLDEuNDM4NC0xLjE2NTc3LDIuNjA0MTctMi42MDQxNywyLjYwNDE3Wk0xMTUuMTA0MTIsOTEuMTQ1ODNoNy4yOTE2N3YtNy4yOTE2N2gtNy4yOTE2N3Y3LjI5MTY3WiIvPjxyZWN0IGNsYXNzPSJ1dWlkLTYzNzdiZjQxLTg5NTktNDI3Yi1hYWVkLTE5ZGMwOWY3MzUwZSIgeD0iODEuMjUiIHk9IjgxLjI1IiB3aWR0aD0iMTIuNSIgaGVpZ2h0PSIxMi41Ii8+PHBhdGggZD0iTTkzLjc0OTk1LDk2LjM1NDE3aC0xMi41Yy0xLjQzODQsMC0yLjYwNDE3LTEuMTY1NzctMi42MDQxNy0yLjYwNDE3di0xMi41YzAtMS40Mzg0LDEuMTY1NzctMi42MDQxNywyLjYwNDE3LTIuNjA0MTdoMTIuNWMxLjQzODQsMCwyLjYwNDE3LDEuMTY1NzcsMi42MDQxNywyLjYwNDE3djEyLjVjMCwxLjQzODQtMS4xNjU3NywyLjYwNDE3LTIuNjA0MTcsMi42MDQxN1pNODMuODU0MTIsOTEuMTQ1ODNoNy4yOTE2N3YtNy4yOTE2N2gtNy4yOTE2N3Y3LjI5MTY3WiIvPjwvc3ZnPg==
  customProperties: {}
  artifacts:
  - uri: oci://registry.redhat.io/rhelai1/modelcar-prometheus-8x7b-v2-0:1.4
    createTimeSinceEpoch: "1743078706000"
    lastUpdateTimeSinceEpoch: "1743078706000"
    customProperties:
      source:
        metadataType: MetadataStringValue
        string_value: registry.redhat.io
      tag:
        metadataType: MetadataStringValue
        string_value: "1.4"
